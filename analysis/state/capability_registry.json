{
  "generated_by": "s9-capability-registry-v1",
  "final_goal": "TUI-first simplified operator UX, then SwiftUI macOS MVP, then Next.js web MVP for login/search/download on top of runtime-complete protocol implementation.",
  "gates": [
    {
      "id": "FG-RUNTIME-100",
      "title": "Runtime coverage completion",
      "required": "verified_runtime=131 and verified_static=0",
      "linked_capabilities": ["CAP-RUNTIME-COMPLETE"]
    },
    {
      "id": "FG-SEMANTIC-DEPTH",
      "title": "Semantic payload depth completion",
      "required": "no raw_tail/raw_payload unresolved schema fields",
      "linked_capabilities": ["CAP-SEMANTIC-DEPTH"]
    },
    {
      "id": "FG-CORE-AUTO-DL",
      "title": "Core download automation",
      "required": "session download-auto succeeds in authenticated flow",
      "linked_capabilities": ["CAP-CLI-DOWNLOAD-AUTO"]
    },
    {
      "id": "FG-TUI-V1",
      "title": "Minimal TUI v1",
      "required": "login/search/select/download/monitor/upload-decision available in TUI",
      "linked_capabilities": ["CAP-TUI-V1"]
    },
    {
      "id": "FG-RELEASE-HARDENING",
      "title": "Release hardening and final closure",
      "required": "config/log redaction, packaging, recovery runbooks, and closure checklist complete",
      "linked_capabilities": [
        "CAP-REDACTION-HARDENING",
        "CAP-PACKAGING-RELEASE",
        "CAP-RECOVERY-RUNBOOKS",
        "CAP-CLOSURE-CHECKLIST",
        "CAP-RELEASE-HARDENING"
      ]
    },
    {
      "id": "FG-S9A-TUI-SIMPLIFIED",
      "title": "TUI-first simplification closure",
      "required": "mandatory login modal, orange UI, download panel toggle/clear, persistence, and startup recovery are complete",
      "linked_capabilities": [
        "CAP-TUI-S9A-SIMPLIFIED"
      ]
    },
    {
      "id": "FG-S9B-SWIFT-MVP",
      "title": "SwiftUI macOS MVP closure",
      "required": "Swift login/search/download MVP works via soul-cli JSON mode with persisted local state",
      "linked_capabilities": [
        "CAP-CLI-JSON-MVP",
        "CAP-SWIFT-GUI-MVP"
      ]
    },
    {
      "id": "FG-S9C-NEXT-MVP",
      "title": "Next.js web MVP closure",
      "required": "Next login/search/download MVP works through safe local server routes over soul-cli JSON mode",
      "linked_capabilities": [
        "CAP-NEXT-GUI-MVP"
      ]
    }
  ],
  "capabilities": [
    {
      "id": "CAP-PROTOCOL-MAPPED",
      "title": "Protocol mapped and implemented",
      "domain": "protocol",
      "status": "done",
      "required_for_final": true,
      "depends_on": [],
      "evidence": ["docs/state/protocol-matrix.md"],
      "blockers": [],
      "notes": "131/131 implemented+mapped baseline reached in S4L and preserved."
    },
    {
      "id": "CAP-RUNTIME-COMPLETE",
      "title": "Runtime evidence for all protocol messages",
      "domain": "runtime",
      "status": "done",
      "required_for_final": true,
      "depends_on": ["CAP-PROTOCOL-MAPPED"],
      "evidence": ["docs/state/runtime-coverage.md"],
      "blockers": [],
      "notes": "Strict runtime closure is complete: verified_runtime=131 and verified_static=0."
    },
    {
      "id": "CAP-SEMANTIC-DEPTH",
      "title": "Semantic depth closure for partial tails",
      "domain": "schema",
      "status": "done",
      "required_for_final": true,
      "depends_on": ["CAP-RUNTIME-COMPLETE"],
      "evidence": ["analysis/protocol/message_schema.json"],
      "blockers": [],
      "notes": "Stage 7 replaced residual raw tails with explicit extension-reserved semantics."
    },
    {
      "id": "CAP-CLI-DOWNLOAD-AUTO",
      "title": "Automated search-select-download flow in CLI/core",
      "domain": "cli_core",
      "status": "done",
      "required_for_final": true,
      "depends_on": ["CAP-SEMANTIC-DEPTH"],
      "evidence": ["docs/runbooks/cli-download-example.md"],
      "blockers": [],
      "notes": "Core orchestration and `session download-auto` are implemented and regression-covered."
    },
    {
      "id": "CAP-DASHBOARD-OPS",
      "title": "Capabilities and critical-path dashboard",
      "domain": "docs",
      "status": "done",
      "required_for_final": false,
      "depends_on": ["CAP-RUNTIME-COMPLETE"],
      "evidence": ["docs/state/capability-dashboard.html"],
      "blockers": [],
      "notes": "Expose blockers, gates, and critical path similarly to rsk_rs dashboards."
    },
    {
      "id": "CAP-TUI-V1",
      "title": "Minimal TUI for core transfer",
      "domain": "tui",
      "status": "done",
      "required_for_final": true,
      "depends_on": ["CAP-CLI-DOWNLOAD-AUTO", "CAP-DASHBOARD-OPS"],
      "evidence": ["rust/tui/src/main.rs"],
      "blockers": [],
      "notes": "TUI v1 shell is available for login/search/select/download/monitor/upload decision flows."
    },
    {
      "id": "CAP-REDACTION-HARDENING",
      "title": "Redaction metadata hardening",
      "domain": "security",
      "status": "done",
      "required_for_final": true,
      "depends_on": ["CAP-TUI-V1"],
      "evidence": ["docs/verification/capture-redaction-policy.md"],
      "blockers": [],
      "notes": "Redacted metadata now stores repository-relative references or external placeholders; regression tests enforce this."
    },
    {
      "id": "CAP-PACKAGING-RELEASE",
      "title": "Release packaging workflow",
      "domain": "release",
      "status": "done",
      "required_for_final": true,
      "depends_on": ["CAP-TUI-V1"],
      "evidence": ["docs/runbooks/release-packaging.md"],
      "blockers": [],
      "notes": "Published reproducible packaging script for CLI+TUI bundles with checksum output."
    },
    {
      "id": "CAP-RECOVERY-RUNBOOKS",
      "title": "Failure recovery runbooks",
      "domain": "ops",
      "status": "done",
      "required_for_final": true,
      "depends_on": ["CAP-TUI-V1"],
      "evidence": ["docs/runbooks/failure-recovery.md"],
      "blockers": [],
      "notes": "Published recovery runbook for auth/search/download/transfer/TUI operational failures."
    },
    {
      "id": "CAP-CLOSURE-CHECKLIST",
      "title": "Final closure checklist and audit",
      "domain": "state",
      "status": "done",
      "required_for_final": true,
      "depends_on": ["CAP-REDACTION-HARDENING", "CAP-PACKAGING-RELEASE", "CAP-RECOVERY-RUNBOOKS"],
      "evidence": ["docs/state/final-closure-checklist.md"],
      "blockers": [],
      "notes": "Final checklist and executable release-hardening audit are published and integrated."
    },
    {
      "id": "CAP-RELEASE-HARDENING",
      "title": "Release hardening and final gates",
      "domain": "release",
      "status": "done",
      "required_for_final": true,
      "depends_on": ["CAP-CLOSURE-CHECKLIST"],
      "evidence": ["docs/state/verification-status.md"],
      "blockers": [],
      "notes": "Release hardening closure completed: redaction metadata, packaging, recovery runbooks, and closure audit are green."
    },
    {
      "id": "CAP-TUI-S9A-SIMPLIFIED",
      "title": "S9A TUI simplification and persistence semantics",
      "domain": "tui",
      "status": "done",
      "required_for_final": true,
      "depends_on": [
        "CAP-TUI-V1",
        "CAP-RELEASE-HARDENING"
      ],
      "evidence": [
        "docs/runbooks/tui-core-transfer.md",
        "rust/tui/src/main.rs"
      ],
      "blockers": [],
      "notes": "Refactor into app/ui/state/storage modules, enforce mandatory login first, apply orange retro palette, and persist credentials/download history with in-progress recovery."
    },
    {
      "id": "CAP-CLI-JSON-MVP",
      "title": "CLI JSON mode for GUI integration",
      "domain": "cli",
      "status": "planned",
      "required_for_final": true,
      "depends_on": [
        "CAP-TUI-S9A-SIMPLIFIED"
      ],
      "evidence": [
        "docs/state/roadmap.md"
      ],
      "blockers": [
        "S9B not started"
      ],
      "notes": "Add machine-readable JSON output for login/search/download commands used by Swift and Next MVP shells."
    },
    {
      "id": "CAP-SWIFT-GUI-MVP",
      "title": "SwiftUI macOS GUI MVP",
      "domain": "gui_macos",
      "status": "planned",
      "required_for_final": true,
      "depends_on": [
        "CAP-CLI-JSON-MVP"
      ],
      "evidence": [
        "docs/state/roadmap.md"
      ],
      "blockers": [
        "Figma design context pending"
      ],
      "notes": "Implement mandatory login sheet, search/results, and downloads panel with show/hide and clear semantics in SwiftUI."
    },
    {
      "id": "CAP-NEXT-GUI-MVP",
      "title": "Next.js web GUI MVP",
      "domain": "gui_web",
      "status": "planned",
      "required_for_final": true,
      "depends_on": [
        "CAP-SWIFT-GUI-MVP"
      ],
      "evidence": [
        "docs/state/roadmap.md"
      ],
      "blockers": [
        "S9B must close first"
      ],
      "notes": "Implement browser MVP with parity semantics for login/search/download and persisted downloads history controls."
    }
  ]
}
